<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
          charset="utf-8">

    <title>UMD Nearspace</title>
    <link rel="stylesheet" href="../content.css">

    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"/>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css">
    <script type="text/javascript" src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"></script>
    <script type="text/javascript" src="https://unpkg.com/leaflet-ajax@2.1.0/dist/leaflet.ajax.min.js"></script>

    <link rel="stylesheet" href="../src/leaflet-groupedlayercontrol/dist/leaflet.groupedlayercontrol.min.css"/>
    <script type="text/javascript"
            src="../src/leaflet-groupedlayercontrol/dist/leaflet.groupedlayercontrol.min.js"></script>

    <script type="text/javascript" src="https://unpkg.com/@mapbox/leaflet-pip@latest/leaflet-pip.js"></script>
</head>
<body onresize="resizeMapHeight()">
<div id="top_pane">
    <div class="top_pane_div"><a href="../">Home</a></div>
    <span class="stretch"></span>
    <div class="top_pane_div">
        <label for="launch_time_textbox">Date: </label><input type="text" title="Date" id="launch_date_textbox"
                                                              placeholder="select a date"
                                                              onchange="changePredictLayers()" style="width: 11ch;">
        <label for="launch_time_textbox">Time: </label><input type="time" title="Time"
                                                              id="launch_time_textbox"
                                                              value="08:30"
                                                              step="1800"
                                                              onchange="changePredictLayers()"
                                                              style="width: 10ch;">
    </div>
    <span class="stretch"></span>
    <div class="top_pane_div">
        <label for="launch_time_textbox">Ascent Rate (m/s): </label><input type="number" title="Ascent Rate (m/s)"
                                                                           id="ascent_rate_textbox" value=6.209808
                                                                           onchange="changePredictLayers()"
                                                                           style="width: 8ch;">
    </div>
    <span class="stretch"></span>
    <div class="top_pane_div">
        <label for="launch_time_textbox">Burst Altitude (m): </label><input type="number" title="Burst Altitude (m)"
                                                                            id="burst_altitude_textbox"
                                                                            value=26047.734976
                                                                            onchange="changePredictLayers()"
                                                                            style="width: 8ch;">
    </div>
    <span class="stretch"></span>
    <div class="top_pane_div">
        <label for="launch_time_textbox">Sea Level Descent Rate (m/s): </label><input type="number"
                                                                                      title="Sea Level Descent Rate (m/s)"
                                                                                      id="sea_level_descent_rate_textbox"
                                                                                      value=6.017126
                                                                                      onchange="changePredictLayers()"
                                                                                      style="width: 8ch;">
    </div>
</div>
<div id="bottom_pane">
    <script type="text/javascript">
        function resizeMapHeight() {
            document.getElementById("bottom_pane").style.height = window.innerHeight - document.getElementById("top_pane").offsetHeight + 'px';
        }

        resizeMapHeight();
    </script>

    <div id="map">
        <script type="text/javascript" src="../leaflet_layers.js"></script>
        <script type="text/javascript" src="predicts.js"></script>
        <script type="text/javascript">
            /* add date picker to input box */
            $(function () {
                $("#launch_date_textbox").datepicker({
                    beforeShow: function () {
                        setTimeout(function () {
                            $('.ui-datepicker').css('z-index', 99999999999999);
                        }, 0);
                    },
                    minDate: +1,
                    maxDate: +8,
                    showOtherMonths: true,
                    selectOtherMonths: true,
                    dateFormat: 'yy-mm-dd'
                });
            });

            window.onload = function () {
                let today = new Date();
                let days_to_next_saturday = (1 + 5 - today.getDay()) % 7;
                if (days_to_next_saturday == 0) {
                    days_to_next_saturday = 7;
                }
                $("#launch_date_textbox").datepicker("setDate", 'today +' + days_to_next_saturday);

                changePredictLayers();
            };
        </script>
    </div>
</div>
</body>
</html>
